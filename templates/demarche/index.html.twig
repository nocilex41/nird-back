{% extends 'base.html.twig' %}

{% block title %}La D√©marche NIRD{% endblock %}

{% block body %}
    <div class="min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 py-12 px-4">
        <div class="max-w-6xl mx-auto">

            <!-- Bouton retour en haut √† gauche -->
            <div class="mb-8">
                <a href="/" class="inline-flex items-center gap-2 bg-white hover:bg-gray-50 text-gray-700 font-medium px-4 py-2 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 border border-gray-200">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                    </svg>
                    <span>Retour</span>
                </a>
            </div>

            <!-- En-t√™te NIRD -->
            <div class="text-center mb-16">
                <div class="flex items-center justify-center gap-4 mb-6">
                    <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center text-4xl shadow-lg">
                        ü¶ã
                    </div>
                    <div class="text-left">
                        <h1 class="text-5xl font-bold">
                            <span class="bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">Num√©rique</span>
                            <span class="bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent"> Inclusif</span>
                        </h1>
                        <p class="text-xl mt-1">
                            <span class="text-pink-600 font-bold">R</span><span class="text-gray-700">esponsable</span>
                            <span class="text-orange-500 font-bold"> D</span><span class="text-gray-700">urable</span>
                        </p>
                    </div>
                </div>

                <div class="inline-flex items-center gap-3 bg-white rounded-full px-6 py-3 shadow-lg border border-gray-200">
                    <span class="text-2xl">‚Üê</span>
                    <span class="text-2xl">‚Üí</span>
                    <span class="text-gray-700 font-medium">Naviguez entre les √©tapes</span>
                </div>
            </div>

            <!-- Timeline Container -->
            <div class="relative mb-12" style="height: 200px;">

                <!-- Conteneur avec padding pour aligner -->
                <div class="relative h-full px-8">

                    <!-- Personnage (positionn√© en pourcentage exact) -->
                    <div id="character" class="absolute transition-all duration-700 ease-in-out" style="top: 0; left: 0; transform: translateX(-50%);">
                        <div class="text-5xl">üë®‚Äçüíº</div>
                    </div>

                    <!-- Timeline -->
                    <div class="absolute" style="top: 80px; left: 0; right: 0;">
                        <!-- Ligne de fond grise -->
                        <div class="relative h-1 bg-gray-300 rounded-full">
                            <!-- Ligne de progression color√©e -->
                            <div id="progressLine" class="absolute top-0 left-0 h-full rounded-full transition-all duration-700 ease-in-out"
                                 style="width: 50%; background: linear-gradient(to right, #10b981, #ec4899);"></div>
                        </div>

                        <!-- √âtapes (flex avec justify-between pour espacement parfait) -->
                        <div class="relative flex justify-between" style="margin-top: -32px;">

                            <!-- √âtape 1 -->
                            <div id="step1-container" class="flex flex-col items-center">
                                <div id="circle1" class="w-16 h-16 rounded-full bg-green-500 border-4 border-white shadow-lg flex items-center justify-center transition-all duration-500">
                                    <span id="icon1" class="text-white text-2xl font-bold">‚úì</span>
                                </div>
                                <p id="label1" class="mt-3 font-bold text-green-600 whitespace-nowrap">Mobilisation</p>
                            </div>

                            <!-- √âtape 2 -->
                            <div id="step2-container" class="flex flex-col items-center">
                                <div id="circle2" class="w-16 h-16 rounded-full bg-pink-500 border-4 border-white shadow-lg flex items-center justify-center transition-all duration-500 scale-110">
                                    <span id="icon2" class="text-white text-2xl font-bold">2</span>
                                </div>
                                <p id="label2" class="mt-3 font-bold text-pink-600 whitespace-nowrap">Exp√©rimentation</p>
                            </div>

                            <!-- √âtape 3 -->
                            <div id="step3-container" class="flex flex-col items-center">
                                <div id="circle3" class="w-16 h-16 rounded-full bg-gray-300 border-4 border-white shadow-lg flex items-center justify-center transition-all duration-500">
                                    <span id="icon3" class="text-white text-2xl font-bold">3</span>
                                </div>
                                <p id="label3" class="mt-3 font-bold text-gray-400 whitespace-nowrap">Int√©gration</p>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <!-- Cartes d'information -->
            <div class="mt-24">

                <!-- Carte 1 : Mobilisation -->
                <div id="card1" class="hidden max-w-4xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden border-t-4 border-green-500">
                    <div class="p-8">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center text-4xl">üéØ</div>
                            <div>
                                <h2 class="text-3xl font-bold text-green-600">√âtape 1 : Mobilisation</h2>
                                <p class="text-gray-600 italic">Sensibilisation et engagement collectif</p>
                            </div>
                        </div>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-green-50 rounded-xl p-6 border-l-4 border-green-500">
                                <h3 class="font-bold text-lg mb-4 flex items-center gap-2">
                                    <span>üèõÔ∏è</span> Institutionnalisation
                                </h3>
                                <ul class="space-y-3 text-gray-700">
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-500 mt-1">‚Ä¢</span>
                                        <span>Un enseignant se d√©signe comme <strong>contact NIRD</strong></span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-500 mt-1">‚Ä¢</span>
                                        <span>Sensibilisation de l'√©quipe √©ducative</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-500 mt-1">‚Ä¢</span>
                                        <span>Rejoindre le r√©seau Tchap</span>
                                    </li>
                                </ul>
                            </div>
                            <div class="bg-blue-50 rounded-xl p-6 border-l-4 border-blue-500">
                                <h3 class="font-bold text-lg mb-4 flex items-center gap-2">
                                    <span>üéâ</span> R√©sultat attendu
                                </h3>
                                <div class="bg-white rounded-lg p-4 border-2 border-blue-200">
                                    <p class="text-gray-700">L'√©quipe √©ducative est <strong>inform√©e</strong> et les <strong>familles</strong> sont sensibilis√©es √† la d√©marche NIRD.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Carte 2 : Exp√©rimentation -->
                <div id="card2" class="max-w-4xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden border-t-4 border-pink-500">
                    <div class="p-8">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="w-16 h-16 bg-pink-100 rounded-xl flex items-center justify-center text-4xl">üî¨</div>
                            <div>
                                <h2 class="text-3xl font-bold text-pink-600">√âtape 2 : Exp√©rimentation</h2>
                                <p class="text-gray-600 italic">Test des solutions concr√®tes</p>
                            </div>
                        </div>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-pink-50 rounded-xl p-6 border-l-4 border-pink-500">
                                <h3 class="font-bold text-lg mb-4 flex items-center gap-2">
                                    <span>üèõÔ∏è</span> Institutionnalisation
                                </h3>
                                <ul class="space-y-3 text-gray-700">
                                    <li class="flex items-start gap-2">
                                        <span class="text-pink-500 mt-1">‚Ä¢</span>
                                        <span>Installation de <strong>postes Linux</strong></span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-pink-500 mt-1">‚Ä¢</span>
                                        <span>Cr√©ation d'<strong>ateliers de reconditionnement</strong> avec les √©l√®ves</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-pink-500 mt-1">‚Ä¢</span>
                                        <span>Contact devient <strong>Coordinateur NIRD</strong></span>
                                    </li>
                                </ul>
                            </div>
                            <div class="bg-blue-50 rounded-xl p-6 border-l-4 border-blue-500">
                                <h3 class="font-bold text-lg mb-4 flex items-center gap-2">
                                    <span>üéâ</span> R√©sultat attendu
                                </h3>
                                <div class="bg-white rounded-lg p-4 border-2 border-blue-200">
                                    <p class="text-gray-700">L'exp√©rience est <strong>document√©e</strong> et les √©l√®ves deviennent <strong>acteurs</strong> du reconditionnement.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Carte 3 : Int√©gration -->
                <div id="card3" class="hidden max-w-4xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden border-t-4 border-orange-500">
                    <div class="p-8">
                        <div class="flex items-center gap-4 mb-6">
                            <div class="w-16 h-16 bg-orange-100 rounded-xl flex items-center justify-center text-4xl">üèÜ</div>
                            <div>
                                <h2 class="text-3xl font-bold text-orange-600">√âtape 3 : Int√©gration</h2>
                                <p class="text-gray-600 italic">Ancrage durable dans l'√©tablissement</p>
                            </div>
                        </div>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-orange-50 rounded-xl p-6 border-l-4 border-orange-500">
                                <h3 class="font-bold text-lg mb-4 flex items-center gap-2">
                                    <span>üèõÔ∏è</span> Institutionnalisation
                                </h3>
                                <ul class="space-y-3 text-gray-700">
                                    <li class="flex items-start gap-2">
                                        <span class="text-orange-500 mt-1">‚Ä¢</span>
                                        <span>Int√©gration au <strong>projet d'√©tablissement</strong></span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-orange-500 mt-1">‚Ä¢</span>
                                        <span>Coordinateur devient <strong>R√©f√©rent NIRD</strong></span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-orange-500 mt-1">‚Ä¢</span>
                                        <span>Direction = <strong>pilote officiel</strong></span>
                                    </li>
                                </ul>
                            </div>
                            <div class="bg-green-50 rounded-xl p-6 border-l-4 border-green-500">
                                <h3 class="font-bold text-lg mb-4 flex items-center gap-2">
                                    <span>üéâ</span> R√©sultat attendu
                                </h3>
                                <div class="bg-white rounded-lg p-4 border-2 border-green-200">
                                    <p class="text-gray-700">La d√©marche est <strong>p√©rennis√©e</strong> avec un soutien <strong>institutionnel durable</strong>.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;

        function updateTimeline() {
            const step1 = document.getElementById('step1-container');
            const step2 = document.getElementById('step2-container');
            const step3 = document.getElementById('step3-container');

            const container = step1.parentElement.parentElement;
            const containerRect = container.getBoundingClientRect();

            const positions = {
                1: step1.offsetLeft + step1.offsetWidth / 2,
                2: step2.offsetLeft + step2.offsetWidth / 2,
                3: step3.offsetLeft + step3.offsetWidth / 2
            };

            const progressWidths = {
                1: '0%',
                2: '50%',
                3: '100%'
            };

            const character = document.getElementById('character');
            character.style.left = positions[currentStep] + 'px';

            document.getElementById('progressLine').style.width = progressWidths[currentStep];

            for (let i = 1; i <= 3; i++) {
                const circle = document.getElementById('circle' + i);
                const icon = document.getElementById('icon' + i);
                const label = document.getElementById('label' + i);

                circle.className = 'w-16 h-16 rounded-full border-4 border-white shadow-lg flex items-center justify-center transition-all duration-500';
                icon.className = 'text-white text-2xl font-bold';

                if (i < currentStep) {
                    circle.classList.add('bg-green-500');
                    icon.textContent = '‚úì';
                    label.className = 'mt-3 font-bold text-green-600 whitespace-nowrap';
                } else if (i === currentStep) {
                    if (i === 1) circle.classList.add('bg-green-500', 'scale-110');
                    if (i === 2) circle.classList.add('bg-pink-500', 'scale-110');
                    if (i === 3) circle.classList.add('bg-orange-500', 'scale-110');
                    icon.textContent = i;
                    if (i === 1) label.className = 'mt-3 font-bold text-green-600 whitespace-nowrap';
                    if (i === 2) label.className = 'mt-3 font-bold text-pink-600 whitespace-nowrap';
                    if (i === 3) label.className = 'mt-3 font-bold text-orange-600 whitespace-nowrap';
                } else {
                    circle.classList.add('bg-gray-300');
                    icon.textContent = i;
                    label.className = 'mt-3 font-bold text-gray-400 whitespace-nowrap';
                }
            }

            for (let i = 1; i <= 3; i++) {
                const card = document.getElementById('card' + i);
                if (i === currentStep) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' && currentStep < 3) {
                currentStep++;
                updateTimeline();
            } else if (e.key === 'ArrowLeft' && currentStep > 1) {
                currentStep--;
                updateTimeline();
            }
        });

        updateTimeline();
        window.addEventListener('resize', updateTimeline);
    </script>
{% endblock %}
